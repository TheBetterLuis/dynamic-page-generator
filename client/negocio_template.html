<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/css/negociosPages.css" />
    <title>AriwÃ«</title>
  </head>
  <body>
    <header>
      <nav>
        <a href="../../index.html" class="active"
          ><i class="fa-regular fa-hand-point-left fa-shake"></i
        ></a>
      </nav>
    </header>
    <div class="slider data-container"></div>
    <script>
      function getParamFromUrl() {
        const path = window.location.pathname;
        const parts = path.split("/");
        return parts[parts.length - 1];
      }
      const param = getParamFromUrl();
      //      const param = "67a8dd237afc07a3d622da0b";
      const url = `http://localhost:3001/api/negociopage/single/${param}`;

      fetch(url)
        .then((response) => {
          if (!response.ok) {
            throw new Error("Network response was not ok");
          }
          return response.json();
        })
        .then((data) => {
          const negocioInfoDiv = document.querySelector(".data-container");
          const usableData = data[0];
          let content = `
  <div class="list">
            <div class="item">
 <img src="/${usableData.image1}" alt="">
                <div class="content">
                    <div class="title">${usableData.title}</div>
                    <div class="type">${usableData.product1}</div>
                    <div class="description">
                    ${usableData.description1}
                    </div>
                    <div class="button">
                        <div class="button-socials">
                            <a class="socials" href="${usableData.email}">
                                <i class="fa-regular fa-envelope"></i>
                            </a>
                            <a class="socials" href="${usableData.instagram}">
                                <i class="fa-brands fa-instagram"></i>
                            </a>
                            <a class="socials" href="${usableData.whatsapp}">
                                <i class="fa-brands fa-whatsapp"></i>
                            </a>
                            <a class="socials" href="${usableData.addressBook}">
                                <i class="fa-regular fa-address-book"></i>
                            </a>
                        </div>
                        <a href="${usableData.location}">
                            <div class="Ubicaion-Button">
                                <i class="fa-solid fa-map-location-dot location"></i>
                                <h1 class="Ubicaion_text">Ubicaion</h1>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
            <div class="item">

 <img src="/${usableData.image2}" alt="">
                <div class="content">
                    <div class="title">${usableData.title}</div>
                    <div class="type">${usableData.product2}</div>
                    <div class="description">
                    ${usableData.description2}
                    </div>
                                        <div class="button">
                         <div class="button-socials">
                            <a class="socials" href="${usableData.email}">
                                <i class="fa-regular fa-envelope"></i>
                            </a>
                            <a class="socials" href="${usableData.instagram}">
                                <i class="fa-brands fa-instagram"></i>
                            </a>
                            <a class="socials" href="${usableData.whatsapp}">
                                <i class="fa-brands fa-whatsapp"></i>
                            </a>
                            <a class="socials" href="${usableData.addressBook}">
                                <i class="fa-regular fa-address-book"></i>
                            </a>
                        </div>
                        <a href="${usableData.location}">
                            <div class="Ubicaion-Button">
                                <i class="fa-solid fa-map-location-dot location"></i>
                                <h1 class="Ubicaion_text">Ubicaion</h1>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
            <div class="item">
 <img src="/${usableData.image3}" alt="">
                <div class="content">
                    <div class="title">${usableData.title}</div>
                    <div class="type">${usableData.product3}</div>
                    <div class="description">
                    ${usableData.description3}
                    </div>
                    <div class="button">
                        <div class="button-socials">
                            <a class="socials" href="${usableData.email}">
                                <i class="fa-regular fa-envelope"></i>
                            </a>
                            <a class="socials" href="${usableData.instagram}">
                                <i class="fa-brands fa-instagram"></i>
                            </a>
                            <a class="socials" href="${usableData.whatsapp}">
                                <i class="fa-brands fa-whatsapp"></i>
                            </a>
                            <a class="socials" href="${usableData.addressBook}">
                                <i class="fa-regular fa-address-book"></i>
                            </a>
                        </div>
                        <a href="${usableData.location}">
                            <div class="Ubicaion-Button">
                                <i class="fa-solid fa-map-location-dot location"></i>
                                <h1 class="Ubicaion_text">Ubicaion</h1>
                            </div>
                        </a>
                    </div>
                </div>
            </div>

          <div class="item">
 <img src="/${usableData.image4}" alt="">
                <div class="content">
                    <div class="title">${usableData.title}</div>
                    <div class="type">${usableData.product4}</div>
                    <div class="description">
                    ${usableData.description4}
                    </div>
                    <div class="button">
                        <div class="button-socials">
                            <a class="socials" href="${usableData.email}">
                                <i class="fa-regular fa-envelope"></i>
                            </a>
                            <a class="socials" href="${usableData.instagram}">
                                <i class="fa-brands fa-instagram"></i>
                            </a>
                            <a class="socials" href="${usableData.whatsapp}">
                                <i class="fa-brands fa-whatsapp"></i>
                            </a>
                            <a class="socials" href="${usableData.addressBook}">
                                <i class="fa-regular fa-address-book"></i>
                            </a>
                        </div>
                        <a href="${usableData.location}">
                            <div class="Ubicaion-Button">
                                <i class="fa-solid fa-map-location-dot location"></i>
                                <h1 class="Ubicaion_text">Ubicaion</h1>
                            </div>
                        </a>
                    </div>
                </div>
            </div>

            </div>
        </div>

        <div class="thumbnail">
            <div class="item">

 <img src="/${usableData.image1}" alt="">

            </div>
            <div class="item">

 <img src="/${usableData.image2}" alt="">
            </div>
            <div class="item">

 <img src="/${usableData.image3}" alt="">
            </div>
            <div class="item">

 <img src="/${usableData.image4}" alt="">
            </div>
        </div>

        <div class="nexPrevArrows">
            <button class="prev"><i class="fa-solid fa-arrow-left"></i></button>
            <button class="next"><i class="fa-solid fa-arrow-right"></i></i></button>
        </div>

          `;
          /*
          data.forEach((item) => {
            content += `
                        <h2>${item.title}</h2>
                        <img src="${item.image1}" alt="${item.product1}" />
                        <p><strong>Product 1:</strong> ${item.product1}</p>
                        <p>${item.description1}</p>
                        <img src="${item.image2}" alt="${item.product2}" />
                        <p><strong>Product 2:</strong> ${item.product2}</p>
                        <p>${item.description2}</p>
                        <img src="${item.image3}" alt="${item.product3}" />
                        <p><strong>Product 3:</strong> ${item.product3}</p>
                        <p>${item.description3}</p>
                        <img src="${item.image4}" alt="${item.product4}" />
                        <p><strong>Product 4:</strong> ${item.product4}</p>
                        <p>${item.description4}</p>
                    `;
          });
          */

          negocioInfoDiv.innerHTML = content;
          carousel();
        })
        .catch((error) => {
          console.error("There was a problem with the fetch operation:", error);
        });

      function carousel() {
        let nextBtn = document.querySelector(".next");
        let prevBtn = document.querySelector(".prev");

        let slider = document.querySelector(".slider");
        let sliderList = slider.querySelector(".slider .list");
        let thumbnail = document.querySelector(".thumbnail");
        let thumbnailItems = thumbnail.querySelectorAll(".item");

        thumbnail.appendChild(thumbnailItems[0]);

        // funtion for next buttom
        nextBtn.onclick = function () {
          moveSlider("next");
        };

        // funtion for prev buttom
        prevBtn.onclick = function () {
          moveSlider("prev");
        };

        function moveSlider(direction) {
          let sliderItems = sliderList.querySelectorAll(".item");
          let thumbnailItems = document.querySelectorAll(".thumbnail .item");

          if (direction === "next") {
            sliderList.appendChild(sliderItems[0]);
            thumbnail.appendChild(thumbnailItems[0]);
            slider.classList.add("next");
          } else {
            sliderList.prepend(sliderItems[sliderItems.length - 1]);
            thumbnail.prepend(thumbnailItems[thumbnailItems.length - 1]);
            slider.classList.add("prev");
          }

          slider.addEventListener(
            "animationend",
            function () {
              if (direction === "next") {
                slider.classList.remove("next");
              } else {
                slider.classList.remove("prev");
              }
            },
            { once: true }
          );
        }
      }
    </script>
  </body>
</html>
